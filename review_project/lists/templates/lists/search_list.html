{% extends 'base.html' %}

{% load staticfiles %}

{% block title %}

Toutes les listes

{% endblock %}

{% block body_title %}
<div class="jumbotron jumbotron-fluid" style="background-image : url({% static 'images/lists-bg.jpg' %}); background-position: 70% 70%; background-size : cover;">
    <div class="container">
	<h1 class="text-center border rounded display-4" style="background-color:white;">Listes</h1>
    </div>
</div>
{% endblock %}

{% block content %}

<div class="col-sm-12 col-md-8 offset-md-2 border">

    <br>
    
    {% if lists|length_is:"0" %}
    <div class="text-center">
	Aucun résultat n'a été trouvé
    </div>

    {% else %}

    

    {% if paginate %}
    <nav aria-label="...">
	<ul class="pagination">
	    {% if lists.has_previous %}
	    <li class="page-item"><a class="page-link sanguine" href="{{request.path}}?query={{query}}&type={{m_type}}&page={{lists.previous_page_number}}&tri={{tri}}">Précédent</a></li>
	    {% else %}
	    <li class="page-item disabled"><span class="page-link sanguine">Précédent</span></li>
	    {% endif %}
	    {% if lists.has_next %}
	    <li class="page-item"><a class="page-link sanguine" href="{{request.path}}?query={{query}}&type={{m_type}}&page={{lists.next_page_number}}&tri={{tri}}">Suivant</a></li>
	    {% else %}
	    <li class="page-item disabled"><span class="page-link sanguine">Suivant</span></li>
	    {% endif %}
	</ul>
    </nav>
    {% endif %}

    <form class="form-inline" method="get" action="{{request.path}}">

	<label class="sr-only" for="query">Rechercher</label>
	<input class="form-control mr-2" id="query" name="query" type="type" value="{{query}}" placeholder="Rechercher...">
	
	<label for="tri" class="sr-only">Tri :   </label>
	<select class="form-control mr-2" id="tri" name="tri">
	    <option>les plus appréciées</option>
	    <option value="recent" {% if tri == 'recent' %}selected{% endif %}>dernières modifications</option>
	    <option value="votes" {% if tri == "votes" %}selected{% endif %}>les plus notées </option>

	</select>

	<input id="page" name="page" type="hidden" value="1">

	<button type="submit" class="btn">Rechercher</button>
    </form>

    <br>

    <table class="table">
	<tr>
	    <th>Listes</th>
	</tr>
	{% for list in lists %}
	<tr>
	    <td> <a href="{% url 'lists:display_list' list.id %}">{{ list.title }}</a> (liste de <a href="{% url 'profile' list.user.username %}"> {{ list.user  }}</a>) <span class="float-right"> <i class="fas fa-heart"></i> <span>{{ list.num_vote_up }}</span></span></td>
	</tr> 
	{% endfor %}
    </table>

    <br>

    {% endif %}

</div>

{% endblock %}
