!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).starRatings=e()}}(function(){return function e(t,r,n){function i(s,o){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!o&&u)return u(s,!0);if(a)return a(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var f=r[s]={exports:{}};t[s][0].call(f.exports,function(e){var r=t[s][1][e];return i(r||e)},f,f.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){t.exports=e("./src/ratings")},{"./src/ratings":2}],2:[function(e,t,r){var n=e("./rest.js"),i=e("./utils");function a(e){e.addEventListener("click",s),e.onmouseenter=function(){var e=u(this),t=this.getAttribute("data-score");i.findParent(this,"star-ratings").querySelector(".star-ratings-rating-foreground").style.width=100/e*t+"%"},e.onmouseleave=function(){!function(e){var t=i.findParent(e,"star-ratings");if(t)return parseFloat(t.getAttribute("data-avg-rating"))}(this);var e=u(this),t=function(e){var t=i.findParent(e,"star-ratings");if(t)return parseFloat(t.getAttribute("data-user-rating"));return-1}(this),r=(this.getAttribute("data-score"),100/e*t+"%");i.findParent(this,"star-ratings").querySelector(".star-ratings-rating-foreground").style.width=r}}function s(e){e.stopPropagation(),e.preventDefault();var t,r,a,s=this.getAttribute("href"),u=this.getAttribute("data-score");t=s,r=u,a=this,n.post(t,{score:r},function(e){var t,r;!function(e,t){var r,n=i.findParent(t,"star-ratings");if(void 0!==n&&null!==n){n.setAttribute("data-avg-rating",e.average),n.setAttribute("data-user-rating",e.user_rating);var a=n.getElementsByClassName("star-ratings-rating-average")[0];a&&(r=a.getElementsByClassName("star-ratings-rating-value")[0])&&(r.innerHTML=e.average.toFixed(2));var s=n.getElementsByClassName("star-ratings-rating-count")[0];s&&(r=s.getElementsByClassName("star-ratings-rating-value")[0])&&(r.innerHTML=e.count);var o=n.getElementsByClassName("star-ratings-rating-user")[0];o&&(r=o.getElementsByClassName("star-ratings-rating-value")[0])&&(r.innerHTML=e.user_rating);var u=100/parseInt(n.getAttribute("data-max-rating"))*e.user_rating;n.querySelector(".star-ratings-rating-foreground").style.width=u+"%";var d=document.getElementById("rated");0==d.checked&&d.click()}}(e,a),t=e,(r=a).dispatchEvent(o("rate-success",{sender:r,rating:t}))},function(e){var t,r,n,s,u;n=e,s=a,void 0!==(u=i.findParent(s,"star-ratings"))&&null!==u&&(u.querySelector(".star-ratings-errors").innerHTML=n.error,setTimeout(function(){u.querySelector(".star-ratings-errors").innerHTML=""},2500)),t=error,(r=a).dispatchEvent(o("rate-failed",{sender:r,error:t}))})}function o(e,t){if("undefined"==typeof CustomEvent){var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!0,!0,t),r}return new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0})}function u(e){var t=i.findParent(e,"star-ratings");return t?parseInt(t.getAttribute("data-max-rating")):-1}document.addEventListener("DOMContentLoaded",function(e){document.querySelector(".star-ratings")&&function(){var e,t=document.querySelectorAll(".star-ratings-rate-action");for(e=0;e<t.length;e+=1)t[e].href=t[e].getAttribute("_href"),a(t[e])}()}),t.exports={bindRating:a}},{"./rest.js":3,"./utils":4}],3:[function(e,t,r){"use strict";var n={getCookie:function(e){var t,r,n,i=null;if(document.cookie&&""!==document.cookie)for(t=document.cookie.split(";"),r=0;r<t.length;r+=1)if((n=t[r].trim()).substring(0,e.length+1)===e+"="){i=decodeURIComponent(n.substring(e.length+1));break}return i},makeRequest:function(e,t,r,n){var i=new XMLHttpRequest;return void 0!==i.overrideMimeType&&i.overrideMimeType("application/json"),i.open(t,e,!0),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<=299?r&&(i.responseText?r(JSON.parse(i.responseText)):r()):n&&n(JSON.parse(i.responseText)))},i},get:function(e,t,r,n){this.makeRequest(e,"GET",r,n).send(JSON.stringify(t))},post:function(e,t,r,n){var i=this.makeRequest(e,"POST",r,n);i.setRequestHeader("X-CSRFToken",this.getCookie("XSRF-TOKEN")),console.log(e,JSON.stringify(t)),i.send(JSON.stringify(t))},put:function(e,t,r,n){var i=this.makeRequest(e,"PUT",r,n);i.setRequestHeader("X-CSRFToken",this.getCookie("XSRF-TOKEN")),i.send(JSON.stringify(t))},patch:function(e,t,r,n){var i=this.makeRequest(e,"PATCH",r,n);i.setRequestHeader("X-CSRFToken",this.getCookie("XSRF-TOKEN")),i.send(JSON.stringify(t))},delete:function(e,t,r,n){var i=this.makeRequest(e,"DELETE",r,n);i.setRequestHeader("X-CSRFToken",this.getCookie("XSRF-TOKEN")),i.send(JSON.stringify(t))}};t.exports=n},{}],4:[function(e,t,r){function n(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1}t.exports={hasClass:n,findParent:function(e,t){for(var r=e.parentNode;!1===n(r,t);){if(void 0===r.parentNode)return null;r=r.parentNode}return r}}},{}]},{},[1])(1)});
